<textarea rows="50" cols="50" id="pattern"></textarea>
<button onclick="convert()">Convert</button>
<script>
var pattern = document.getElementById("pattern");
function convert() {
    var s = pattern.value;
    var lines = s.split(/\r?\n/g),
            line,
            struct = [],
            sline,
            width = 0;
    for (var i=0; i<lines.length; ++i) {
        line = lines[i];
        struct.push(sline = []);
        for (var j=0; j<line.length; ++j) {
            sline.push(line.charAt(j) !== '.' ? 1 : 0);
        }
        if (j > width) width = j;
    }
    s = "[";
    for (i=0; i<struct.length; ++i) {
        while (struct[i].length < width)
            struct[i].push(0);
        s += "\n    ["+struct[i].toString()+"],";
    }
    s = s.substring(0, s.length-1)+"\n]";
    
    pattern.value = s;
}
</script>
